# 🌟 LeanCloud 配置指南 - 完美解决跨设备同步问题

## 为什么选择 LeanCloud？

✅ **完全支持中国大陆访问** - 无需翻墙，速度极快  
✅ **免费额度充足** - 每天3万次API请求，1GB存储空间  
✅ **语音文件存储** - 支持音频文件上传和跨设备同步  
✅ **实时数据库** - 真正的跨设备实时同步  
✅ **简单易用** - 5分钟配置完成  

## 🚀 快速配置步骤

### 1. 注册 LeanCloud 账号

访问：https://www.leancloud.cn/
- 点击"免费注册"
- 使用邮箱或手机号注册
- **选择"华北节点"**（中国大陆访问最快）

### 2. 创建应用

1. 登录控制台后，点击"创建应用"
2. 应用名称：`读书角落`
3. 选择"开发版"（免费）
4. 节点：华北节点

### 3. 获取配置信息

在应用概览页面，复制以下信息：
- **App ID**：类似 `aBcDeFgH1234567890abcdef`
- **App Key**：类似 `XyZ1234567890abcdefghijkl`
- **服务器URL**：类似 `https://your-domain.lc-cn-n1-shared.com`

### 4. 配置数据存储

1. 进入"数据存储" → "结构化数据"
2. 点击"创建 Class"，名称：`Annotation`
3. 权限设置：
   - **create**: 允许所有用户
   - **read**: 允许所有用户
   - **update**: 仅允许创建者
   - **delete**: 仅允许创建者

### 5. 配置文件存储

1. 进入"数据存储" → "文件"
2. 确认文件存储已开启
3. 权限设置：允许匿名用户上传（用于语音文件）

### 6. 更新代码配置

打开 `leancloud-version.html`，找到这段代码并替换：

```javascript
const LEANCLOUD_CONFIG = {
    appId: 'your-app-id',        // 替换为你的 App ID
    appKey: 'your-app-key',      // 替换为你的 App Key
    serverURL: 'https://your-domain.lc-cn-n1-shared.com' // 替换为你的服务器地址
};
```

## 📱 测试跨设备同步

配置完成后：

1. **电脑端**：打开 `http://localhost:8080/leancloud-version.html`
2. **手机端**：打开 `http://192.168.0.104:8080/leancloud-version.html`
3. **分别登录不同角色**：一个用`021117`，一个用`000726`
4. **开始标注测试**：看看是否实时同步！

## 🎯 功能特点

### ✅ 已实现功能
- 🔄 **真正的跨设备实时同步**
- 📱 **完美支持中国大陆访问**
- 🎙️ **语音录制和云端存储**
- 😊 **12种表情标注**
- 💬 **文字评论标注**
- 💌 **回信标注**
- 🎨 **双用户颜色区分**
- 📊 **重叠标注智能混合**
- 👆 **移动端触摸优化**

### 🔥 核心优势
- **零成本** - 免费额度足够使用
- **高速度** - 中国大陆直连，毫秒级响应
- **真实时** - 一个设备标注，另一个立即显示
- **语音云存储** - 语音文件存储在云端，跨设备播放

## ⚠️ 重要提醒

1. **免费额度监控**：
   - API请求：30,000次/天
   - 存储空间：1GB
   - 一般个人使用完全够用

2. **备用方案**：
   - 如果超出免费额度，会自动降级到本地模式
   - 本地模式依然支持同一网络下的同步

3. **数据安全**：
   - 所有数据加密传输
   - 支持数据导出备份

## 🎊 配置完成后的效果

- ✨ **电脑上标注，手机立即看到**
- ✨ **手机上录语音，电脑能播放**
- ✨ **任何地方任何设备，数据实时同步**
- ✨ **完全免费，无限制使用**

---

**配置遇到问题？请告诉我具体的错误信息，我会立即帮你解决！**